
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>1. Getting set up &#8212; NCAS Unified Model Introduction</title>
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2. Working with Suites" href="working-with-suites.html" />
    <link rel="prev" title="NCAS Unified Model Introduction: Practical sessions" href="index.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="working-with-suites.html" title="2. Working with Suites"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="NCAS Unified Model Introduction: Practical sessions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">NCAS Unified Model Introduction</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-set-up">
<h1>1. Getting set up<a class="headerlink" href="#getting-set-up" title="Permalink to this headline">¶</a></h1>
<div class="section" id="launch-mobaxterm">
<h2>1.1. Launch MobaXterm<a class="headerlink" href="#launch-mobaxterm" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Login to the windows machine with your University of Reading credentials</li>
<li>If there is a MobaXterm icon on the Desktop, double click it, choose to run the application, then move on to the next Section “Login to PUMA”.</li>
</ul>
<p>Mobaxterm may also be available through the Start menu, under All programs.</p>
<p>If there is no MobaXterm:</p>
<ul class="simple">
<li>Open the Chrome browser</li>
<li>google “mobaxterm download”</li>
<li>Download the Personal Edition</li>
<li>Choose Save As - and save to the Desktop</li>
<li>Double click the MobaXterm folder, drag MobaXterm_Personal_8.4.exe to the Desktop</li>
<li>Double click the MobaXterm icon</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Windows sometimes fails to display a  MobaXterm icon on the desktop; if this happens, simply double click the application in the Desktop file listing.</p>
</div>
</div>
<div class="section" id="login-to-puma">
<h2>1.2. Login to PUMA<a class="headerlink" href="#login-to-puma" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span>xterm$ ssh -Y &lt;puma-username&gt;@puma.nerc.ac.uk
</pre></div>
</div>
</div>
<div class="section" id="set-up-your-puma-environment-and-access-to-mosrs">
<h2>1.3. Set up your PUMA environment and access to MOSRS<a class="headerlink" href="#set-up-your-puma-environment-and-access-to-mosrs" title="Permalink to this headline">¶</a></h2>
<p><strong>i. Configure ~/.profile</strong></p>
<p>If this is the first time you have used your PUMA account, you will need to create a <code class="docutils literal"><span class="pre">.profile</span></code>. Copy our standard one:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>puma$ cd
puma$ cp ~um/um-training/setup/.profile .
</pre></div>
</div>
<p>(If you already have a <code class="docutils literal"><span class="pre">.profile</span></code>, make sure it includes the lines from the standard file.)</p>
<p><strong>ii. Configuring access to MOSRS</strong></p>
<p>Run the <code class="docutils literal"><span class="pre">mosrs-setup</span></code> script which will take you through the set up process to access the Met Office Science Repository Service (Remember your MOSRS username is one word; usually firstnamelastname, all in lowercase):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>puma$ ~um/um-training/mosrs-setup
</pre></div>
</div>
<p>Log out of PUMA and back in again (you will get a warning about not being able to find <code class="docutils literal"><span class="pre">~/.ssh/ssh-setup</span></code> this can be ignored and will be resolved in the next step). You should be prompted for your Met Office Science Repository Service password. A new window should then pop up (it may be hidden behind other windows) for <code class="docutils literal"><span class="pre">Rosie</span></code> asking for <strong>Username for ‘u’ - ‘https://code.metoffice.gov.uk/rosie/u’</strong> . Enter your MOSRS username again.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The cached password is configured to expire after 12 hours. Simply run the command <code class="docutils literal"><span class="pre">mosrs-cache-password</span></code> to re-cache it if this happens. Also if you know you won’t need access to the repositories during a login session then just press return when asked for your MOSRS password.</p>
</div>
</div>
<div class="section" id="make-sure-you-can-login-to-your-archer-training-account">
<h2>1.4. Make sure you can login to your ARCHER training account<a class="headerlink" href="#make-sure-you-can-login-to-your-archer-training-account" title="Permalink to this headline">¶</a></h2>
<p>An ARCHER username will be provided on the day of the course. Ask the CMS team if you’re unsure. The password for these accounts is listed in a file on PUMA: <code class="docutils literal"><span class="pre">~um/um-training/login.txt</span></code>.</p>
<p>From PUMA:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>puma$ ssh &lt;archer-username&gt;@login.archer.ac.uk
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It’s best to copy and paste the password from the file rather than type it by hand.</p>
</div>
</div>
<div class="section" id="set-up-your-archer-environment">
<h2>1.5. Set up your ARCHER environment<a class="headerlink" href="#set-up-your-archer-environment" title="Permalink to this headline">¶</a></h2>
<p>Once you have successfully logged into ARCHER, copy the following profile to your home directory.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>archer$ cp /work/y07/y07/umshared/um-training/rose-profile ~/.profile
</pre></div>
</div>
</div>
<div class="section" id="exit-archer">
<h2>1.6. Exit ARCHER<a class="headerlink" href="#exit-archer" title="Permalink to this headline">¶</a></h2>
<p>Log out of ARCHER. This should take you back to puma.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>archer$ exit
</pre></div>
</div>
</div>
<div class="section" id="set-up-an-ssh-connection-from-puma-to-archer">
<span id="ssh-setup"></span><h2>1.7. Set up an ssh connection from PUMA to ARCHER<a class="headerlink" href="#set-up-an-ssh-connection-from-puma-to-archer" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you already have ssh keys and agent set up on PUMA, follow the instructions on <a class="reference internal" href="ssh-tasks.html#using-existing-agent"><span class="std std-ref">Using an existing ssh agent</span></a> in the Appendix, then skip to Section 1.8.</p>
</div>
<p><strong>i. Generate authentication key on PUMA and install it on ARCHER.</strong></p>
<p>Run the <code class="docutils literal"><span class="pre">install-ssh-keys</span></code> script.  This will take you through ssh-key creation and copy the key over to ARCHER.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>puma$ source ~um/um-training/install-ssh-keys &lt;archer-username&gt;@login.archer.ac.uk
</pre></div>
</div>
<p>When prompted to <strong>Enter passphrase</strong>, this should be a fairly complicated and unguessable passphrase. You can use spaces in the passphrase if it helps you to remember it more readily. It is recommended that you don’t use your password in case it is hacked.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>DO NOT</strong> use an empty passphrase as this presents a security issue.</p>
</div>
<p>After generating your ssh-key, the script will copy it over to ARCHER.</p>
<p>When prompted for <strong>Password</strong>, enter your ARCHER password.</p>
<p><strong>ii. Verify the authentication works.</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>puma$ ssh &lt;archer-username&gt;@login.archer.ac.uk
Enter passphrase for key &#39;/home/&lt;puma-username&gt;/.ssh/id_dsa&#39;:
[TYPE_YOUR_PASSPHRASE]
</pre></div>
</div>
<p>If you don’t get asked for your Passphrase (i.e. RSA key), then something has gone wrong. In this case, make sure the public key, was successfully copied over to ARCHER by logging into ARCHER and opening the file <code class="docutils literal"><span class="pre">~/.ssh/authorized_keys</span></code>. It should contain something similar to:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span> <span class="n">AAAAB3NzaC1yc2EAAAABIwAAAQEAt1JmHYgsuf0UWVLqNqnDSaUUP2xJ</span><span class="o">+</span><span class="n">Um0H5WnUt</span><span class="o">/</span><span class="n">i</span>
<span class="mi">2</span><span class="n">mxhlBrwOtvVWRjnzo5EcylZJs</span><span class="o">/</span><span class="n">Cg5JVe4UR6toqNXbZG1RXscLQnQoPAvzFoWLzfP7Q3lrzeC1S</span>
<span class="n">kM2FWfWC38ga3Svs6fm63</span><span class="o">/</span><span class="n">I7WmJy</span><span class="o">+</span><span class="mi">4</span><span class="n">D8BWWaXj</span><span class="o">/</span><span class="mi">9</span><span class="n">yM1OskFj6yfWItr150rwwNauOQbWJhl7I</span><span class="o">/</span><span class="n">Kk</span>
<span class="n">fhVPBvZ9vHiAK4cjUMQ9fFS1dij3GSBmOfu2RuMgNNg9y1MLSzEk2242F4tOg7paTk7wwUZ</span><span class="o">+</span><span class="n">ZLqR</span>
<span class="n">BtT2aREnjIGI7KvACBZD1y40tXXPIZw9m2Dl0dK7mFQ2</span><span class="o">/</span><span class="n">YFWh2</span><span class="o">/</span><span class="n">NAmkFMXzDOmkg0biq1m</span><span class="o">+</span><span class="n">QKw</span><span class="o">==</span>
<span class="n">ros</span><span class="nd">@puma</span>
</pre></div>
</div>
<p>If it doesn’t, and no errors were reported from the <code class="docutils literal"><span class="pre">install-ssh-keys</span></code> script, please ask for assistance.</p>
<p>Once you have this part working, log out of ARCHER.</p>
<p><strong>iii. Start up ssh-agent.</strong></p>
<p>Run the following command and type your passphrase:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>puma$ ssh-add
Enter passphrase for /home/&lt;puma-username&gt;/.ssh/id_rsa:
[TYPE_YOUR_PASSPHRASE]
</pre></div>
</div>
<p>The ssh agent should keep running even when you log out of puma, however you may need to restart it from time to time. For instructions on how to do this see <a class="reference internal" href="ssh-tasks.html#restarting-agent"><span class="std std-ref">Restarting your ssh agent</span></a> in the Appendix.</p>
</div>
<div class="section" id="check-this-all-works-by-ssh-ing-to-archer">
<h2>1.8. Check this all works by ssh-ing to ARCHER<a class="headerlink" href="#check-this-all-works-by-ssh-ing-to-archer" title="Permalink to this headline">¶</a></h2>
<p>From PUMA type:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>puma$ ssh &lt;archer-username&gt;@login.archer.ac.uk
</pre></div>
</div>
<p>If you get to ARCHER without a password or passphrase, then you’re done.</p>
<p>You are now ready to try running a UM suite!</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. Getting set up</a><ul>
<li><a class="reference internal" href="#launch-mobaxterm">1.1. Launch MobaXterm</a></li>
<li><a class="reference internal" href="#login-to-puma">1.2. Login to PUMA</a></li>
<li><a class="reference internal" href="#set-up-your-puma-environment-and-access-to-mosrs">1.3. Set up your PUMA environment and access to MOSRS</a></li>
<li><a class="reference internal" href="#make-sure-you-can-login-to-your-archer-training-account">1.4. Make sure you can login to your ARCHER training account</a></li>
<li><a class="reference internal" href="#set-up-your-archer-environment">1.5. Set up your ARCHER environment</a></li>
<li><a class="reference internal" href="#exit-archer">1.6. Exit ARCHER</a></li>
<li><a class="reference internal" href="#set-up-an-ssh-connection-from-puma-to-archer">1.7. Set up an ssh connection from PUMA to ARCHER</a></li>
<li><a class="reference internal" href="#check-this-all-works-by-ssh-ing-to-archer">1.8. Check this all works by ssh-ing to ARCHER</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">NCAS Unified Model Introduction: Practical sessions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="working-with-suites.html"
                        title="next chapter">2. Working with Suites</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/getting-setup.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="working-with-suites.html" title="2. Working with Suites"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="NCAS Unified Model Introduction: Practical sessions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">NCAS Unified Model Introduction</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, NCAS-CMS.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>