

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>9. Post processing &mdash; NCAS Unified Model Introduction</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="10. Appendix A: Useful information" href="useful-information.html" />
    <link rel="prev" title="8. Rose/Cylc Exercises" href="rose-cylc-exercises.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> NCAS Unified Model Introduction
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Practicals</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-setup.html">1. Getting set up (7th-9th February, Leeds)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working-with-suites.html">2. Working with Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">3. Running a UM suite on ARCHER2</a></li>
<li class="toctree-l1"><a class="reference internal" href="fcm-tutorial.html">4. FCM tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="solving-problems.html">5. Solving Common UM Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="further-exercises-1.html">6. Further Exercises (1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="further-exercises-2.html">7. Further Exercises (2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="rose-cylc-exercises.html">8. Rose/Cylc Exercises</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">9. Post processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#xconv">9.1. xconv</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#view-data">View data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#convert-um-fields-data-to-netcdf">Convert UM fields data to netCDF</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#uminfo">9.2. uminfo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mule">9.3. Mule</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mule-pumf">mule-pumf</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mule-summary">mule-summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mule-cumf">mule-cumf</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#um-convpp">9.4. um-convpp</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cfa">9.5. cfa</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cf-python-cf-plot">9.6. CF-python CF-plot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="useful-information.html">10. Appendix A: Useful information</a></li>
<li class="toctree-l1"><a class="reference internal" href="ssh-tasks.html">11. Appendix B: SSH FAQs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NCAS Unified Model Introduction</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">9. </span>Post processing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/post-processing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="post-processing">
<h1><span class="section-number">9. </span>Post processing<a class="headerlink" href="#post-processing" title="Permalink to this headline">¶</a></h1>
<p>This is simply a very basic introduction to some of the more widely used useful tools for viewing, checking, and converting UM input and output data. The tools described below all run on the ARCHER2 login nodes.</p>
<div class="section" id="xconv">
<h2><span class="section-number">9.1. </span>xconv<a class="headerlink" href="#xconv" title="Permalink to this headline">¶</a></h2>
<div class="section" id="view-data">
<h3>View data<a class="headerlink" href="#view-data" title="Permalink to this headline">¶</a></h3>
<p>On ARCHER2 go to the output directory of the global job that you ran previously (the one copied from <code class="docutils literal notranslate"><span class="pre">u-cc654</span></code>). Run <code class="docutils literal notranslate"><span class="pre">xconv</span></code> on the file ending with, for example, <code class="docutils literal notranslate"><span class="pre">da19880901_04</span></code>. This file is an atmosphere start file - this type of file is used to restart the model from the time specified in the file header data.</p>
<p>In the directory above is a file whose name ends in <code class="docutils literal notranslate"><span class="pre">.astart</span></code>; run a second instance of <code class="docutils literal notranslate"><span class="pre">xconv</span></code> on this file. This is the file used by the model to start its run - created by the reconfiguration program in this case.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">xconv</span></code> window lists the fields in the file, the dimensions of those fields (upper left panel), the coordinates of the grid underlying the data, the time(s) of the data (upper right panel), some information about the type of file (lower left panel), and general data about the field (lower right panel.)</p>
<p>Both files have the same fields. Double click on a field to reveal its coordinate data. Check the time for this field (select the “t” checkbox in the upper right panel).</p>
<p>Plot both sets of data - click the <span class="guilabel">Plot Data</span> button.</p>
<p>View the data - this shows numerical data values and their coordinates and can be helpful for finding spurious data values.</p>
</div>
<div class="section" id="convert-um-fields-data-to-netcdf">
<h3>Convert UM fields data to netCDF<a class="headerlink" href="#convert-um-fields-data-to-netcdf" title="Permalink to this headline">¶</a></h3>
<p>Select a single-level field (one for which <code class="docutils literal notranslate"><span class="pre">nz=1</span></code>), choose <span class="guilabel">Output format</span> to be <span class="guilabel">Netcdf</span>, enter an “Output file name”, and select <span class="guilabel">Convert</span>. Information relevant to the file conversion will appear in the lower left panel.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">xconv</span></code> to view the netcdf file just created.</p>
</div>
</div>
<div class="section" id="uminfo">
<h2><span class="section-number">9.2. </span>uminfo<a class="headerlink" href="#uminfo" title="Permalink to this headline">¶</a></h2>
<p>You can view the header information for the fields in a UM file by using the utility <code class="docutils literal notranslate"><span class="pre">uminfo</span></code> - redirect the output to a file or pipe it to <code class="docutils literal notranslate"><span class="pre">less</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>archer2$ uminfo &lt;one-of-your-fields-files&gt; | less
</pre></div>
</div>
<p>The output from this command is best viewed in conjunction with the Unified Model Documentation Paper F3 which explains in depth the various header fields.</p>
</div>
<div class="section" id="mule">
<h2><span class="section-number">9.3. </span>Mule<a class="headerlink" href="#mule" title="Permalink to this headline">¶</a></h2>
<p>Mule consists of a Python API for reading and writing UM files and a set of UM utilities.  This section introduces you to some of the most useful UM utilities.  Full details of Mule can be found on the MOSRS: <a class="reference external" href="https://code.metoffice.gov.uk/doc/um/index.html">https://code.metoffice.gov.uk/doc/um/index.html</a></p>
<p>Before running the mule commands you will need to load the python environment on ARCHER2 by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>archer2$ module load cray-python
</pre></div>
</div>
<div class="section" id="mule-pumf">
<h3>mule-pumf<a class="headerlink" href="#mule-pumf" title="Permalink to this headline">¶</a></h3>
<p>This provides another way of seeing header information, but also gives some information about the fields themselves. Its intended use is to aid in quick inspections of files for diagnostic purposes.</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">mule-pumf</span></code> on the start file - here’s a couple of examples on one of Ros’ files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>archer2$ mule-pumf --print-columns 2 --headers-only \\
                       cc654.astart &gt; ~/mule-pumf-header.out

archer2$ mule-pumf --print-columns 2 cc654.astart &gt; ~/mule-pumf.out
</pre></div>
</div>
<ul class="simple">
<li><p>Can you see what the difference is in the output of these 2 commands?</p></li>
</ul>
<p>Take a look at the man page (<code class="docutils literal notranslate"><span class="pre">mule-pumf</span> <span class="pre">-h</span></code>) and experiment with some of the other options</p>
</div>
<div class="section" id="mule-summary">
<h3>mule-summary<a class="headerlink" href="#mule-summary" title="Permalink to this headline">¶</a></h3>
<p>This utility is used to print out a summary of the lookup headers which describe the fields from a UM file. Its intended use is to aid in quick inspections of files for diagnostic purposes.</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">mule-summary</span></code> on the start file again.</p>
</div>
<div class="section" id="mule-cumf">
<h3>mule-cumf<a class="headerlink" href="#mule-cumf" title="Permalink to this headline">¶</a></h3>
<p>This utility is used to compare two UM files and report on any differences found in either the headers or field data. Its intended use is to test results from different UM runs against each other to investigate possible changes. Note, differences in header information can arise even when field data is identical. Try out the following:</p>
<ul class="simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">mule-cumf</span></code> on the two start files referred to above (in the <em>“View data”</em> section). You may wish to direct the output to a file.</p></li>
<li><p>Run the same command but with the <code class="docutils literal notranslate"><span class="pre">--summary</span></code> option.  This, as the name suggests, prints a much shorter report of the differences.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">mule-cumf</span></code> on a file and itself.</p></li>
<li><p>View the help page with <code class="docutils literal notranslate"><span class="pre">mule-cumf</span> <span class="pre">-h</span></code> to find view all the available options.</p></li>
</ul>
</div>
</div>
<div class="section" id="um-convpp">
<h2><span class="section-number">9.4. </span>um-convpp<a class="headerlink" href="#um-convpp" title="Permalink to this headline">¶</a></h2>
<p>We have mentioned in the presentations the PP file format - this is a sequential format (a fields file is random access) still much used in the community. PP data is stored as 32-bit, which provides a significant saving of space, but means that a conversion step is required from a fields file (64-bit). The utility to do this is called <code class="docutils literal notranslate"><span class="pre">um-convpp</span></code>.  <code class="docutils literal notranslate"><span class="pre">um-convpp</span></code> converts directly from 64-bit files produced by the UM to 32-bit PP files.  You must, however, make sure you are using a version 10.4 or greater - you can check that you are using the right one by typing <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">um-convpp</span></code>.</p>
<p>Set the stack size limit to unlimited, and add the path to <code class="docutils literal notranslate"><span class="pre">um-convpp</span></code> to your environment - you can also add this to your <code class="docutils literal notranslate"><span class="pre">~/.profile</span></code> so it is available everytime you log in.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>archer2$ ulimit -s unlimited
archer2$ export PATH=$UMDIR/vn11.2/cce/utilities:$PATH
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">um-convpp</span></code> on a fieldsfile (E.g <cite>cc654a.pc19880901_00</cite>)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>archer2$ cd /home/n02/n02/ros/cylc-run/u-cc654/share/data/History_Data
archer2$ um-convpp cc654a.pc19880901_00 cc654a.pc19880901_00.pp

archer2$ ls -l cc654a.pc19880901*
-rw-r--r-- 1 ros n02 26447872 Nov  2 10:36 cc654a.pc19880901_00
-rw-r--r-- 1 ros n02 20372768 Nov  2 10:47 cc654a.pc19880901_00.pp
-rw-r--r-- 1 ros n02 26476544 Nov  2 10:36 cc654a.pc19880901_06
</pre></div>
</div>
<p>Note the reduction in file size. Now use <code class="docutils literal notranslate"><span class="pre">xconv</span></code> to examine the contents of the PP file.</p>
</div>
<div class="section" id="cfa">
<h2><span class="section-number">9.5. </span>cfa<a class="headerlink" href="#cfa" title="Permalink to this headline">¶</a></h2>
<p>There is an increasing use of python in the community and we have, and
continue to develop, python tools to do much of the data processing
previously done using IDL or MATLAB and are working to extend that
functionality. <code class="docutils literal notranslate"><span class="pre">cfa</span></code> is a python utility which offers a host of
features - we’ll use it to convert UM fields file or PP data to
CF-compliant data in NetCDF format. You first need to set the
environment to run <code class="docutils literal notranslate"><span class="pre">cfa</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>archer2$ export PATH=/home/n02/n02/dch/cf/bin:$PATH
archer2$ cfa -i -o cc654a.pc19880901_00.nc cc654a.pc19880901_00.pp
</pre></div>
</div>
<p>Try viewing the NetCDF file with xconv.</p>
<p><code class="docutils literal notranslate"><span class="pre">cfa</span></code> can also view CF fields. It can be run on PP or NetCDF
files, to provide a text representation of the CF fields contained in
the input files. Try it on a PP file and its NetCDF equivalent,
e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>archer2$ cfa -vm cc654a.pc19880901_00.pp | less
Field: long_name:HEAVYSIDE FN ON P LEV/UV GRID (ncvar%UM_m01s30i301_vn1100)
---------------------------------------------------------------------------
Data           : long_name:HEAVYSIDE FN ON P LEV/UV GRID(time(5), air_pressure(17), latitude(145), longitude(192))
Cell methods   : time: point
Axes           : time(5) = [1988-09-01T00:00:00Z, ..., 1988-09-01T03:59:59Z] 360_day
               : air_pressure(17) = [1000.0, ..., 10.0] hPa
               : latitude(145) = [-90.0, ..., 90.0] degrees_north
               : longitude(192) = [0.0, ..., 358.125] degrees_east

Field: long_name:VORTICITY 850 (ncvar%UM_m01s30i455_vn1100)
-----------------------------------------------------------
Data           : long_name:VORTICITY 850(time(5), latitude(145), longitude(192))
Cell methods   : time: point
Axes           : air_pressure(1) = [-1.0] hPa
               : time(5) = [1988-09-01T00:00:00Z, ..., 1988-09-01T03:59:59Z] 360_day
               : latitude(145) = [-90.0, ..., 90.0] degrees_north
               : longitude(192) = [0.0, ..., 358.125] degrees_east
</pre></div>
</div>
</div>
<div class="section" id="cf-python-cf-plot">
<h2><span class="section-number">9.6. </span>CF-python CF-plot<a class="headerlink" href="#cf-python-cf-plot" title="Permalink to this headline">¶</a></h2>
<p>Many tools exist for analysing data from NWP and climate models and there are many contributing factors for the proliferation of these analysis utilities, for example, the disparity of data formats used by the authors of the models, and/or the availability of the underlying sofware. There is a strong push towards developing and using python as the underlying language and CF-netCDF as the data format. CMS is home to tools in the CF-netCDF stable - here’s an example of the use of these tools to perform some quite complex data manipulations. The user is insulated from virtually all of the details of the methods allowing them to concentrate on scientific analysis rather than programming intricacies.</p>
<ul>
<li><p>Set up the environment and start python.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>archer2$ export PATH=/home/n02/n02/dch/cf/bin:$PATH
archer2$ python
&gt;&gt;&gt;
</pre></div>
</div>
</li>
</ul>
<p>We’ll be looking at CRU observed precipitation data.</p>
<ul>
<li><p>Import the cf-python library</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">cf</span>
</pre></div>
</div>
</li>
<li><p>Read in data files</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;~dch/UM_Training/cru/*.nc&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Inspect the file contents with different amounts of detail</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">dump</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
<p>Note that the two files in the cru directory are aggregated into one
field.</p>
<ul>
<li><p>Read in another field produced by a GCM, this has a different
latitude/longitude grid to regrid the CRU data to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;~dch/UM_Training/N96_DJF_precip_means.nc&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Regrid the field of observed data, <code class="docutils literal notranslate"><span class="pre">f</span></code> to the grid of the model
field (g)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">regrids</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Average the regridded field with respect to time</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">collapse</span><span class="p">(</span><span class="s1">&#39;T: mean&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Note that the time axis is now of length 1.</p>
<ul>
<li><p>Subspace the regridded field to a European region</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">subspace</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">cf</span><span class="o">.</span><span class="n">wi</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">Y</span><span class="o">=</span><span class="n">cf</span><span class="o">.</span><span class="n">wi</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="mi">70</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Note that the latitude and longitude axes are now shorter in length.</p>
<ul>
<li><p>Import the cfplot visualisation library</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">cfplot</span>
</pre></div>
</div>
</li>
<li><p>Make a default contour plot of the regridded observed data, <code class="docutils literal notranslate"><span class="pre">f</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cfplot</span><span class="o">.</span><span class="n">con</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Make a “blockfill” plot of the regridded observed data, <code class="docutils literal notranslate"><span class="pre">f</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cfplot</span><span class="o">.</span><span class="n">con</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">blockfill</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Make a default contour plot of the model data, <code class="docutils literal notranslate"><span class="pre">g</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cfplot</span><span class="o">.</span><span class="n">con</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Make a “blockfill” plot of the model data, <code class="docutils literal notranslate"><span class="pre">g</span></code>, over the
same region</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">subspace</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">cf</span><span class="o">.</span><span class="n">wi</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">Y</span><span class="o">=</span><span class="n">cf</span><span class="o">.</span><span class="n">wi</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="mi">70</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfplot</span><span class="o">.</span><span class="n">con</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">blockfill</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Write out the new field f to disk</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;cru_precip_european_mean_regridded.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>This has just given you a taster of CF-Python &amp; CF-Plot, if you would like to try out some more exercises please take a look at <a class="reference external" href="https://github.com/NCAS-CMS/cf-training">https://github.com/NCAS-CMS/cf-training</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="useful-information.html" class="btn btn-neutral float-right" title="10. Appendix A: Useful information" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="rose-cylc-exercises.html" class="btn btn-neutral float-left" title="8. Rose/Cylc Exercises" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017-2023, NCAS-CMS.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>